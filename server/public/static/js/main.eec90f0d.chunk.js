(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{135:function(e,t,n){},136:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(30),i=n.n(c),o=(n(135),n(136),n(64)),s=n(14),l=n(118),u=n(228),p=n(67),d=n.n(p),j=n(229),b=n(110),f=n.n(b),h=n(230),x=n(4),O=n(28),g=n(36),m=n.n(g),v=n(57),y=n(58),P=n.n(y),k=n(86),w=function(e,t){return Object.assign({},e,{properties:t})},C=function(e,t){return Object.assign({},e,{property:t})},S=function(e,t){return Object.assign({},e,{properties:t})},T=function(e,t){return Object.assign({},e,t)},_="ADD_ALL_PROPERTIES",E="SET_FETCHING_STATUS",I="FIND_PROPERTY",F=function(e){return{type:E,isFetching:e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:[],isFetching:!1,property:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return w(e,t.payload);case E:return Object(k.a)(Object(k.a)({},e),{},{isFetching:t.isFetching});case I:return C(e,t.payload);default:return e}},L="FIND_PROPERTIES",R="SET_SEARCH_POINT",A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:[],point:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return S(e,t.payload);case R:return T(t.payload);default:return e}};P.a.interceptors.request.use(function(){var e=Object(v.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("enginer-token");case 2:return n=e.sent,t.headers["x-access-token"]=n,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var B=n(225),M=n(2),z=function(e){var t=e.data;return Object(M.jsx)("pre",{children:JSON.stringify(t,null,2)})},J=Object(M.jsx)(f.a,{}),N=Object(x.a)(j.a)((function(e){return{display:"grid",margin:e.theme.spacing(5)}})),W=Object(O.b)((function(e){return{properties:e.properties.properties}}),(function(e){return{fetchAllProps:function(){e(function(){var e=Object(v.a)(m.a.mark((function e(t){var n,r,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(F(!0)),e.prev=1,e.next=4,P.a.get("/properties");case 4:n=e.sent,r=n.data,a=r.status,c=r.results,"ok"===a&&t({type:_,payload:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:return e.prev=14,t(F(!1)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.properties,n=e.fetchAllProps,a=Object(s.f)(),c=Object(r.useCallback)((function(e,t){t.preventDefault(),a.replace("/detail/".concat(e))}),[t]),i=Object(r.useMemo)((function(){return[{name:"Property latitude",selector:function(e){return e.geocode_geo.coordinates[0]}},{name:"Property longitude",selector:function(e){return e.geocode_geo.coordinates[1]}},{name:"Property Detail",selector:function(e){return Object(M.jsx)(h.a,{href:"#",onClick:c.bind(undefined,e.id),children:"Details"})}}]}),[t]);return Object(r.useEffect)((function(){n()}),[]),Object(M.jsxs)(N,{children:[Object(M.jsx)(j.a,{children:Object(M.jsx)(B.a,{variant:"contained",color:"secondary",onClick:function(e){a.replace("/#")},children:"Back"})}),t&&Object(M.jsx)(d.a,{columns:i,data:t,expandableRows:!0,expandableRowsComponent:z,sortIcon:J,pagination:!0})]})})),Q=n(49),V=n(223),Y=n(75),G=n(113),Z=n.n(G),$=n(114),H=Object(Y.b)({properties:D,find_properties:A}),K=Object(Y.c)((function(e,t){return H(e,t)}),Object(Y.a)($.a,Z.a)),U=n(5),X=n(13),q=n(233),ee=n(235),te=n(236),ne=n(238),re=n(231),ae=n(232),ce=n(237),ie=Object(x.a)(j.a)((function(e){return{display:"grid",margin:e.theme.spacing(5)}})),oe=Object(O.b)((function(e){var t=e.properties.property,n=t.id,r=t.geocode_geo,a=t.image_url;return r?Object.assign({},{property:{id:n,name:r.crs.properties.name,coordinates:r.coordinates,image_url:a}}):{}}),(function(e){return{selectProperty:function(t){e(function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r,a,c,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.a.post("/property/".concat(e));case 3:r=t.sent,a=r.data,c=a.status,i=a.result,"ok"===c&&n({type:I,payload:i}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t,n=e.property,a=e.selectProperty,c=Object(s.g)().pid,i=Object(r.useState)(!1),o=Object(X.a)(i,2),l=o[0],u=o[1],p=Object(s.f)();Object(r.useEffect)((function(){a(c)}),[]);var d=Object(r.useCallback)((function(e){u(!l)}),[]);return Object(M.jsx)(ie,{children:n&&Object(M.jsx)(ae.a,{maxWidth:"sm",children:Object(M.jsxs)(q.a,(t={sx:{maxWidth:345}},Object(U.a)(t,"sx",{marginLeft:"auto",marginRight:"auto"}),Object(U.a)(t,"children",[Object(M.jsx)(ee.a,{title:n.name}),Object(M.jsx)(te.a,{component:"img",alt:"property image",loading:"lazy",src:"/display/".concat(c,"?overlay=yes&parcel=green"),onLoad:d}),!l&&Object(M.jsxs)(j.a,{sx:{display:"grid",textAlign:"center",margin:"10px 0"},children:[Object(M.jsx)(ce.a,{sx:{margin:"auto"}}),Object(M.jsx)(re.a,{children:"Loading large image, please wait for seconds ..."})]}),Object(M.jsxs)(ne.a,{children:[Object(M.jsxs)(re.a,{children:["Property latitude: ",n.coordinates[0]]}),Object(M.jsxs)(re.a,{children:["Property longitude: ",n.coordinates[1]]}),Object(M.jsx)(B.a,{variant:"contained",onClick:function(e){p.replace("/list")},color:"secondary",sx:{margin:"10px 0"},children:"Back"})]})]),t))})})})),se=n(227),le=Object(x.a)(j.a)((function(e){return{marginBottom:e.theme.spacing(3)}})),ue=function(){return Object(M.jsx)(le,{children:Object(M.jsx)(re.a,{component:"h1",sx:{textAlign:"center"},children:"Zesty.ai Engineering Test"})})},pe=Object(x.a)(j.a)((function(e){return{padding:e.theme.spacing(1),textAlign:"center"}})),de=function(e){return Object(M.jsx)(ae.a,{maxWidth:"sm",children:Object(M.jsxs)(se.a,{container:!0,spacing:2,justifyContent:"center",direction:"column",children:[Object(M.jsx)(se.a,{item:!0,xs:8,children:Object(M.jsx)(pe,{children:Object(M.jsx)(h.a,{href:"#/list",children:"Property list"})})}),Object(M.jsx)(se.a,{item:!0,xs:8,children:Object(M.jsx)(pe,{children:Object(M.jsx)(h.a,{href:"#/find",children:"Find properties"})})})]})})},je=n(234),be=Object(O.b)((function(e){var t=e.find_properties.properties;return{properties:t||[]}}),null)((function(e){var t=e.properties,n=Object(r.useMemo)((function(){return[{name:"Property id",selector:function(e){return e.id}},{name:"Property longitude",selector:function(e){return e.geocode_geo.coordinates[0]}},{name:"Property latitude",selector:function(e){return e.geocode_geo.coordinates[1]}}]}),[t]);return Object(M.jsx)(je.a,{sx:{margin:"20px 0"},children:Object(M.jsx)(d.a,{columns:n,data:t})})})),fe=window.L,he=Object(O.b)((function(e){var t=e.find_properties.point,n=t.lat,r=t.lng;return n&&r?{point:[n,r]}:{point:[51.505,-.09]}}),null)((function(e){var t=e.point,n=Object(r.useState)(null),a=Object(X.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){var e=fe.map("map").setView(t,13);fe.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1Ijoiemhlbmd3IiwiYSI6ImNrdmlta2R5cDJjODQyb255YW5mMWV1ZXQifQ.XYJG95xQBWTsGujiKaKUQA"}).addTo(e),i(e)}),[]),Object(r.useEffect)((function(){c&&(fe.marker(t).addTo(c).bindPopup("Target location"),c.setView(t,13))}),[c,t]),Object(M.jsx)(se.a,{item:!0,xs:12,children:Object(M.jsx)(j.a,{id:"map"})})})),xe=n(224),Oe=n(117),ge=Object(O.b)((function(e){return e}),(function(e){return{findProperties:function(t){e(function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n((c={point:{lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]}},{type:R,payload:c})),t.next=4,P.a.post("/find",e);case 4:r=t.sent,n((a=r.data.results,{type:L,payload:a})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}var a,c}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.findProperties,n=Object(Oe.a)({initialValues:{lat:"",lng:"",dist:"10000"},validate:function(e){var t={};return e.lat?e.lat.trim().match(/^[-+]?(?:[1-8]?\d(?:\.\d+)?|90(?:\.0+)?)$/)||(t.lat="Please enter a valid latitude value."):t.lat="Please enter a latitude value.",e.lng?e.lng.trim().match(/([-+]?(?:180(?:\.0+)?|(?:(?:1[0-7]\d)|(?:[1-9]?\d))(?:\.\d+)?))$/)||(t.lng="Please enter a valid longitude value."):t.lng="Please enter a longitude values.",e.dist?e.dist.match(/^[+]?([0-9]+(?:[\.][0-9]*)?|\.[0-9]+)$/)||(t.dist="Please enter a valid distance value."):t.dist="Please enter a distance values.",t},onSubmit:function(e){var n={type:"Feature",geometry:{type:"Point",coordinates:[e.lng,e.lat]},"x-distance":e.dist};t(n)}});return Object(M.jsx)("form",{onSubmit:n.handleSubmit,children:Object(M.jsxs)(se.a,{container:!0,item:!0,justifyContent:"center",spacing:1,xs:12,sx:{margin:"10px"},children:[Object(M.jsx)(se.a,{item:!0,xs:3,children:Object(M.jsx)(xe.a,{error:Boolean(n.touched.lat&&n.errors.lat),label:"Latitude",name:"lat",value:n.values.lat,onChange:n.handleChange,helperText:n.errors.lat})}),Object(M.jsx)(se.a,{item:!0,xs:3,children:Object(M.jsx)(xe.a,{error:Boolean(n.touched.lng&&n.errors.lng),label:"Longitude",name:"lng",value:n.values.lng,onChange:n.handleChange,helperText:n.errors.lng})}),Object(M.jsx)(se.a,{item:!0,xs:3,children:Object(M.jsx)(xe.a,{error:Boolean(n.touched.dist&&n.errors.dist),label:"Distance",name:"dist",value:n.values.dist,onChange:n.handleChange,helperText:n.errors.dist})}),Object(M.jsx)(se.a,{item:!0,container:!0,xs:3,justifyContent:"center",children:Object(M.jsx)(B.a,{variant:"contained",size:"large",type:"submit",children:"Search"})})]})})})),me=function(){var e=Object(s.f)();return Object(M.jsxs)(ae.a,{children:[Object(M.jsx)(B.a,{variant:"contained",type:"button",color:"secondary",sx:{margin:"10px 0"},onClick:function(t){e.replace("/#")},children:"Back"}),Object(M.jsx)(je.a,{elevation:3,children:Object(M.jsxs)(se.a,{container:!0,children:[Object(M.jsx)(ge,{}),Object(M.jsx)(he,{})]})}),Object(M.jsx)(be,{})]})},ve=Object(l.a)({status:{danger:Q.a[500]},h1:{fontSize:"24px"}});var ye=function(){return Object(M.jsx)(O.a,{store:K,children:Object(M.jsxs)(u.a,{theme:ve,children:[Object(M.jsx)(V.a,{}),Object(M.jsxs)("div",{children:[Object(M.jsx)(ue,{}),Object(M.jsx)(o.a,{children:Object(M.jsxs)(s.c,{children:[Object(M.jsx)(s.a,{exact:!0,path:"/",component:de}),Object(M.jsx)(s.a,{path:"/list",component:W}),Object(M.jsx)(s.a,{path:"/detail/:pid",component:oe}),Object(M.jsx)(s.a,{path:"/find",component:me})]})})]})]})})},Pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,239)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(ye,{})}),document.getElementById("root")),Pe()}},[[177,1,2]]]);
//# sourceMappingURL=main.eec90f0d.chunk.js.map